<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>G√©n√©rateur de cartes NAO/TT ‚Äî JSON ‚Üí Cartes</title>

  <style>
    :root{
      --bg: #120606;
      --text: #ffffff;
      --muted: rgba(255,255,255,0.78);
      --shadow: 0 18px 50px rgba(0,0,0,0.45);
      --radius: 18px;
      --border: 3px;
      --card-w: 340px;
      --card-h: 476px;
      --ui: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--ui);
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 50% 20%, rgba(255,80,80,0.25), transparent 60%),
        radial-gradient(900px 600px at 20% 70%, rgba(255,200,0,0.12), transparent 60%),
        radial-gradient(900px 600px at 80% 70%, rgba(0,140,255,0.12), transparent 60%),
        linear-gradient(180deg, #120606, var(--bg));
      padding:22px 16px 40px;
    }

    header{
      max-width:1200px;
      margin:0 auto 14px;
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      align-items:flex-end;
      justify-content:space-between;
    }
    h1{margin:0;font-size:clamp(18px,2.2vw,26px)}
    .sub{margin:6px 0 0;color:var(--muted);font-size:14px;max-width:860px;line-height:1.35}

    .toolbar{
      max-width:1200px;
      margin:10px auto 16px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      padding:12px;
      border-radius:12px;
      background:rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.06);
    }
    .toolbar .left, .toolbar .right{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 10px;border-radius:999px;
      background:rgba(0,0,0,0.18);
      border:1px solid rgba(255,255,255,0.08);
      font-size:13px;color:rgba(255,255,255,0.92);
      user-select:none;
    }
    .dot{width:10px;height:10px;border-radius:50%;}
    button{
      cursor:pointer;
      border:none;
      border-radius:10px;
      padding:8px 12px;
      font-weight:800;
      color:#fff;
      background:rgba(255,255,255,0.08);
      border:1px solid rgba(255,255,255,0.10);
    }
    button:hover{background:rgba(255,255,255,0.12)}
    select, input[type="search"]{
      background:rgba(0,0,0,0.18);
      border:1px solid rgba(255,255,255,0.08);
      border-radius:10px;
      padding:8px 10px;
      color:#fff;
      font-weight:700;
      outline:none;
    }

    .grid{
      max-width:1200px;
      margin:0 auto;
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap:16px;
      align-items:start;
    }

    /* Card */
    .card{
      width:min(100%, var(--card-w));
      height:var(--card-h);
      margin:0 auto;
      position:relative;
      border-radius:var(--radius);
      overflow:hidden;
      box-shadow:var(--shadow);
      border: var(--border) solid rgba(255,255,255,0.06);
      isolation:isolate;
      display:flex;
      flex-direction:column;
      padding:14px;
      justify-content:flex-start;
      gap:10px;
    }

    .card:before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(500px 240px at 50% 18%, rgba(255,255,255,0.12), transparent 60%),
        radial-gradient(600px 380px at 30% 70%, rgba(255,255,255,0.06), transparent 60%),
        radial-gradient(800px 400px at 80% 80%, rgba(0,0,0,0.30), transparent 60%);
      mix-blend-mode:overlay;
      pointer-events:none;
      z-index:0;
    }

    .frame{
      position:absolute; inset:10px;
      border-radius:calc(var(--radius) - 8px);
      border:2px solid rgba(255,255,255,0.06);
      box-shadow: inset 0 0 0 2px rgba(0,0,0,0.14);
      pointer-events:none;
      z-index:1;
    }

    .content{position:relative;z-index:2;display:flex;flex-direction:column;height:100%;}

    .topbar{display:flex;justify-content:space-between;gap:10px;align-items:flex-start}
    .badge{
      font-weight:900;letter-spacing:.6px;font-size:12px;
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,0.12);
      background:rgba(0,0,0,0.18);
      text-transform:uppercase;white-space:nowrap;
    }
    .code{
      font-weight:900;letter-spacing:.6px;font-size:12px;
      padding:6px 10px;border-radius:10px;
      background:rgba(0,0,0,0.14);
      border:1px solid rgba(255,255,255,0.10);
      white-space:nowrap;
    }

    .title{
      margin:4px 0 0;
      font-weight:900;
      text-transform:uppercase;
      line-height:1.02;
      letter-spacing:.6px;
      font-size:20px;
    }
    .subtitle{
      margin:6px 0 0;
      color:rgba(255,255,255,0.92);
      font-weight:800;
      font-size:13px;
      background:rgba(0,0,0,0.12);
      padding:6px 8px;border-radius:10px;display:inline-block;
    }

    .art{
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.06);
      background:rgba(0,0,0,0.10);
      height:170px;
      display:grid;
      place-items:center;
      position:relative;
      overflow:hidden;
    }
    .art img.card-art{
      width:100%;
      height:100%;
      object-fit:cover;
      object-position:center;
      display:block;
      transform-origin:center;
      filter:contrast(1.02) saturate(1.05);
    }
    .art .mini-glow{
      position:absolute; inset:auto 0 0 0;
      height:46%;
      background: radial-gradient(220px 90px at 50% 30%, rgba(255,255,255,0.14), transparent 65%);
      pointer-events:none;
    }
    .art .art-overlay{
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.12));
      pointer-events:none;
    }

    .stats{
      display:grid;
      grid-template-columns: 1fr auto;
      gap:8px 12px;
      padding:8px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background:rgba(0,0,0,0.10);
      font-size:13px;
      line-height:1.2;
    }
    .stat-name{ color:rgba(255,255,255,0.92); font-weight:800; }
    .stars{ letter-spacing:1px; font-weight:800; }

    .desc{
      margin:0;
      padding:8px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background:rgba(0,0,0,0.08);
      color:rgba(255,255,255,0.96);
      font-size:13px;
      line-height:1.35;
      flex:1 1 auto;
      white-space:pre-wrap;
    }
    .effect{
      margin:6px 0 0;
      font-size:13px;
      padding:8px;
      border-radius:10px;
      border:1px dashed rgba(255,255,255,0.08);
      background:rgba(255,255,255,0.02);
      color:rgba(255,255,255,0.96);
      display:flex;gap:8px;align-items:flex-start;
    }
    .footer{
      margin-top:10px;
      display:flex;justify-content:space-between;align-items:center;gap:10px;
      padding:8px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);
      background:rgba(0,0,0,0.08);font-size:12px;color:rgba(255,255,255,0.92);
    }
    .footer strong{font-weight:900}

    /* Themes */
    .theme-gold{ background: linear-gradient(180deg,#7b2000,#2b0d05); }
    .theme-purple{ background: linear-gradient(180deg,#2b0b44,#12051f); }
    .theme-blue{ background: linear-gradient(180deg,#0b2a55,#061423); }
    .theme-red{ background: linear-gradient(180deg,#5a0f0f,#200606); }

    @media print{
      body{background:#fff;color:#000;padding:0}
      header,.toolbar{display:none}
      .grid{max-width:none;margin:0;gap:10mm;padding:10mm}
      .card{box-shadow:none;break-inside:avoid}
    }
  </style>
</head>
<body>
  <header>
    <div>
      <h1>G√©n√©rateur de cartes NAO/TT</h1>
      <p class="sub">Edite le JSON ci-dessous pour ajouter tes cartes. Place les images dans <code>assets/cards/</code> et rafraichis la page.</p>
    </div>
    <div class="pill"><span class="dot" style="background:#ff3b3b"></span><strong>CGT</strong> ‚Ä¢ NAO 2026</div>
  </header>

  <section class="toolbar" aria-hidden="false">
    <div class="left">
      <span class="pill"><span style="font-weight:900">Filtres</span></span>

      <select id="filterType" aria-label="Filtre type">
        <option value="ALL">Tout</option>
        <option value="NAO">NAO</option>
        <option value="TT">TT</option>
      </select>

      <select id="filterRarity" aria-label="Filtre raret√©">
        <option value="ALL">Toutes raret√©s</option>
        <option value="LEGENDARY">L√©gendaire</option>
        <option value="ULTRA_RARE">Ultra rare</option>
        <option value="RARE">Rare</option>
        <option value="COMMON">Commune</option>
      </select>

      <input id="search" type="search" placeholder="Recherche (ex: transport, 13e, vendredi‚Ä¶)" />
    </div>

    <div class="right">
      <button id="btnCopyJson">Copier JSON</button>
      <button onclick="window.print()">Imprimer</button>
    </div>
  </section>

  <main id="cards" class="grid" aria-live="polite"></main>

  <script>
    /* =====================
       EDITE ICI LE JSON
       Met les images dans assets/cards/ (ex: assets/cards/13e-mois.png)
       ===================== */
    const CARDS_JSON = [
      {
        id: "NAO-01",
        type: "NAO",
        title: "13·µâ mois p√©renne",
        subtitle: "Pouvoir d'achat durable",
        rarity: "LEGENDARY",
        icon: "CHEST",
        image: "assets/cards/13e-mois.png",
        stats: { "Pouvoir d'achat": 5, "Stabilit√©": 5, "Justice sociale": 5, "Impact collectif": 5 },
        desc: "Int√©gration d'un 13·µâ mois dans le brut annuel.\nUn revenu stabilis√©, s√©curis√© et p√©renne pour toutes et tous.",
        footerLeft: "NAO 2026 ‚Ä¢ CGT",
        footerRight: "√âdition revendications"
      },
      {
        id: "NAO-02",
        type: "NAO",
        title: "Augmentation +5,75 %",
        subtitle: "Rattrapage & √©quit√©",
        rarity: "ULTRA_RARE",
        icon: "ARROW",
        image: "assets/cards/augmentation-5-75.png",
        stats: { "Pouvoir d'achat": 5, "√âquit√©": 5, "Urgence": 4, "Solidarit√©": 5 },
        desc: "Augmentation g√©n√©rale de 5,75 % pour l'ensemble des salari√©¬∑es.\nRattrapage automatique pour celles et ceux non augment√©¬∑es depuis 3 ans.",
        effect: "‚ú® Active un bonus collectif imm√©diat : fin des r√®gles arbitraires et du favoritisme.",
        footerLeft: "NAO 2026 ‚Ä¢ CGT",
        footerRight: "Pouvoir collectif"
      },
      {
        id: "TT-03",
        type: "TT",
        title: "T√©l√©travail non r√©vocable",
        subtitle: "Stabilit√© & respect des vies perso",
        rarity: "RARE",
        icon: "HOME_SHIELD",
        image: "assets/cards/teletravail.png",
        stats: { "√âquilibre vie pro/perso": 5, "Protection": 5, "Stabilit√©": 4, "Justice territoriale": 5 },
        desc: "Accord collectif stable et non r√©vocable.\nLe t√©l√©travail ne peut pas √™tre suspendu de mani√®re unilat√©rale : c'est une condition de travail.",
        effect: "üõ° Prot√®ge contre les d√©cisions arbitraires et les pressions disciplinaires.",
        footerLeft: "T√©l√©travail 2026 ‚Ä¢ Droits collectifs",
        footerRight: "CGT"
      }
    ];

    /* =====================
       Helper functions
       ===================== */
    function safe(s){ return String(s ?? ""); }
    function stars(n){ n = Math.max(0, Math.min(5, Number(n)||0)); return "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ".slice(5-n, 10-n); }
    function rarityToTheme(r){
      switch(r){
        case "LEGENDARY": return { cls: "theme-gold", label: "L√âGENDAIRE" };
        case "ULTRA_RARE": return { cls: "theme-purple", label: "ULTRA RARE" };
        case "RARE": return { cls: "theme-blue", label: "RARE" };
        default: return { cls: "theme-red", label: "COMMUNE" };
      }
    }

    /* Inline simple SVG fallback icons */
    function iconSVG(kind){
      if(kind === "ARROW"){
        return `<svg viewBox="0 0 200 200" width="140" height="140" aria-hidden="true">
          <rect x="20" y="30" width="160" height="140" rx="18" fill="rgba(255,255,255,0.04)"/>
          <path d="M35 135 L80 110 L110 120 L150 80" fill="none" stroke="#ff7cff" stroke-width="12" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>`;
      } else if(kind === "HOME_SHIELD"){
        return `<svg viewBox="0 0 200 200" width="140" height="140" aria-hidden="true">
          <circle cx="78" cy="92" r="60" fill="rgba(255,255,255,0.06)"/>
          <path d="M40 92 L80 58 L120 92" fill="none" stroke="#ff6b6b" stroke-width="10" stroke-linecap="round" stroke-linejoin="round"/>
          <rect x="52" y="92" width="56" height="54" rx="10" fill="rgba(255,255,255,0.12)"/>
        </svg>`;
      } else {
        return `<svg viewBox="0 0 200 200" width="140" height="140" aria-hidden="true">
          <circle cx="100" cy="95" r="70" fill="rgba(255,235,140,0.18)"/>
          <rect x="45" y="95" width="110" height="65" rx="10" fill="#8b3a10" />
        </svg>`;
      }
    }

    /* Render function */
    function render(cards){
      const mount = document.getElementById("cards");
      mount.innerHTML = "";

      cards.forEach(card => {
        const t = rarityToTheme(card.rarity);
        const statsRows = Object.entries(card.stats || {}).map(([k,v]) => `
          <div class="stat-name">${safe(k)}</div>
          <div class="stars">${stars(v)}</div>
        `).join("");

        const effect = card.effect ? `<p class="effect"><span>‚ú®</span><span>${safe(card.effect)}</span></p>` : "";

        const artContent = card.image
          ? `<img class="card-art" src="${safe(card.image)}" alt="${safe(card.title)}">`
          : iconSVG(card.icon);

        const el = document.createElement("section");
        el.className = `card ${t.cls}`;
        el.innerHTML = `
          <div class="frame"></div>
          <div class="content">
            <div class="topbar">
              <div class="badge">${t.label}</div>
              <div class="code">${safe(card.id)}</div>
            </div>

            <h2 class="title">${safe(card.title)}</h2>
            <div class="subtitle">${safe(card.subtitle)}</div>

            <div class="art" data-image="${safe(card.image || '')}">
              ${artContent}
              <div class="art-overlay" aria-hidden="true"></div>
              <div class="mini-glow"></div>
            </div>

            <div class="stats">${statsRows}</div>

            <p class="desc">${safe(card.desc)}</p>

            ${effect}

            <div class="footer">
              <span><strong>${safe(card.footerLeft || (card.type === "TT" ? "T√©l√©travail 2026" : "NAO 2026"))}</strong></span>
              <span class="tiny">${safe(card.footerRight || "CGT")}</span>
            </div>
          </div>
        `;
        mount.appendChild(el);
      });
    }

    /* Filtering */
    function cardMatchesFilters(card, {type, rarity, q}){
      const hay = [
        card.id, card.type, card.title, card.subtitle,
        card.rarity, card.desc, card.effect || ""
      ].join(" ").toLowerCase();

      if (type !== "ALL" && card.type !== type) return false;
      if (rarity !== "ALL" && card.rarity !== rarity) return false;
      if (q && !hay.includes(q)) return false;
      return true;
    }

    function applyFilters(){
      const type = document.getElementById("filterType").value;
      const rarity = document.getElementById("filterRarity").value;
      const q = (document.getElementById("search").value || "").trim().toLowerCase();
      const filtered = CARDS_JSON.filter(c => cardMatchesFilters(c, {type, rarity, q}));
      render(filtered);
    }

    document.getElementById("filterType").addEventListener("change", applyFilters);
    document.getElementById("filterRarity").addEventListener("change", applyFilters);
    document.getElementById("search").addEventListener("input", applyFilters);

    document.getElementById("btnCopyJson").addEventListener("click", async () => {
      try{
        await navigator.clipboard.writeText(JSON.stringify(CARDS_JSON, null, 2));
        alert("JSON copi√© dans le presse-papiers !");
      }catch(e){
        alert("Copie impossible ‚Äî copie manuelle du JSON requise.");
      }
    });

    /* Initial render */
    render(CARDS_JSON);
  </script>
</body>
</html>
